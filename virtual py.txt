# Activate the virtual environment  phyton
source ~/myenv/bin/activate
cd /var/www/html/ai/
deactivate

جدید
uvicorn api.routes:app --reload --port 5000
OR
pkill -f "uvicorn api.routes:app" && uvicorn api.routes:app --reload --port 5000

curl -X POST "http://127.0.0.1:5000/register?domain=parsicanada.com"
curl "http://127.0.0.1:5000/api/crawl-status/customer_id"
curl -X POST "http://127.0.0.1:5000/api/chat" -H "Content-Type: application/json" -H "X-Customer-ID: customer_id" -d '{"text": "لطفاً درباره پارسی کانادا توضیح بده"}'

sudo lsof -i :5000
sudo kill -9 PID
sudo pkill -9 uvicorn


قبل
# پاک کردن داده‌های قبلی
rm -rf processed_data/parsicanada.com
# اجرای مجدد فاز 1
python run_phase1.py https://parsicanada.com --max-pages 20
# اجرای فاز 2
python run_phase2.py parsicanada.com --server --type gemini --port 5000
--type online: استفاده از OpenAI
--type local: استفاده از Ollama
--type gemini: استفاده از Google Gemini


# گام 1: ایجاد امبدینگ‌ها  
python create_embeddings.py  

# گام 2: ایجاد پایگاه دانش  
python create_knowledge_base.py  

# گام 3: تست پایگاه دانش  
python test_knowledge_base.py  

# گام 4: راه‌اندازی چت‌بات  
python chatbot_rag.py
python chatbot_rag_local.py --model llama3.2:latest

# گام 5 (اختیاری): راه‌اندازی سرور وب  
python app.py
python app.py --type gemini --port 5001
--type online: استفاده از OpenAI
--type local: استفاده از Ollama
--type gemini: استفاده از Google Gemini

# اجرای کامل فاز 2 بدون تست و سرور  
python run_phase2.py  

# اجرای کامل فاز 2 با تست پایگاه دانش  
python run_phase2.py --test  

# اجرای کامل فاز 2 و راه‌اندازی سرور وب  
python run_phase2.py --server  

# استفاده از پارامترهای سفارشی  
python run_phase2.py --input processed_data/final_processed_data.csv --model all-mpnet-base-v2 --test  


خب ازت میخوام کمکم کنی که این پروژه رو تکمیل کنم.

ببین من هدفم از ایجاد این پروژه تا الان این بوده که یک سیستم کاملا پویا بسازم که هر کاربر بتونه آدرس وب سایتش رو بده به این سیستم و یک دیتا کامل از سایتش آماده کنیم و یک افزونه برای سایتش بهش بدیم که مشتری های اون بتونن با چت بات هوشمند که اطلاعات اون سایت و شرکت رو داره چت کنن. میتونی کمکم کنی که این سیستم رو بسازم و این سیستم رو ارتقا بدم؟

من بلد نیستم و باید بهم بگی که چطور باید پیاده سازی رو انجام بدیم. کل پروژه تغییرات رو فاز بندی کن و بگو که با هم شروع کنیم

این یک پروژه چت‌بات هوشمند است که از چند بخش اصلی تشکیل شده:

1. **بخش سرور (Backend)**:
   - با استفاده از Flask نوشته شده
   - قابلیت پشتیبانی از سه نوع مدل هوش مصنوعی:
     - OpenAI (GPT)
     - مدل محلی (Local)
     - Google Gemini
   - سیستم مدیریت تاریخچه چت
   - قابلیت استخراج منابع و مراجع از پاسخ‌ها

2. **بخش کاربری (Frontend)**:
   - رابط کاربری وب
   - پنل مدیریت
   - ویجت قابل تعبیه
   - فایل‌های استاتیک

3. **ویژگی‌های اصلی**:
   - استفاده از تکنیک RAG (Retrieval-Augmented Generation) برای پاسخ‌دهی دقیق‌تر
   - پشتیبانی از چندین مدل هوش مصنوعی
   - ذخیره تاریخچه گفتگوها
   - نمایش منابع و مراجع پاسخ‌ها
   - API برای ارتباط با چت‌بات

4. **ساختار پروژه**:
   - تقسیم‌بندی منظم به بخش‌های مختلف
   - پشتیبانی از Docker برای اجرای راحت‌تر
   - مدیریت تنظیمات
   - ابزارهای ایجاد و مدیریت پایگاه دانش

نحوه کار سیستم:
1. کاربر سوالی می‌پرسد
2. سیستم در پایگاه دانش جستجو می‌کند
3. اطلاعات مرتبط را پیدا می‌کند
4. با استفاده از مدل هوش مصنوعی انتخاب شده، پاسخ را تولید می‌کند
5. پاسخ را همراه با منابع و مراجع به کاربر نمایش می‌دهد

آیا مایلید در مورد بخش خاصی از پروژه توضیحات بیشتری ارائه دهم؟ یا سوال خاصی در مورد نحوه کارکرد بخش‌های مختلف دارید؟

بله، حتما. من به شما کمک می‌کنم تا این سیستم رو به صورت مرحله به مرحله توسعه بدیم. بیایید پروژه رو به چند فاز تقسیم کنیم:

**فاز 1: بهبود سیستم جمع‌آوری داده**
1. ایجاد یک API برای دریافت URL سایت
2. توسعه سیستم کراولینگ هوشمند که:
   - صفحات مهم سایت رو شناسایی کنه
   - محتوای مرتبط رو استخراج کنه
   - ساختار سایت رو حفظ کنه
   - تصاویر و فایل‌های مرتبط رو ذخیره کنه

**فاز 2: بهبود سیستم پردازش داده**
1. توسعه سیستم پردازش متن برای:
   - حذف محتوای اضافی
   - دسته‌بندی محتوا
   - استخراج کلمات کلیدی
   - ایجاد خلاصه برای هر بخش
2. بهبود سیستم ایجاد امبدینگ
3. بهینه‌سازی ذخیره‌سازی داده‌ها

**فاز 3: توسعه پنل مدیریت**
1. ایجاد داشبورد مدیریت برای:
   - مشاهده سایت‌های اضافه شده
   - مدیریت محتوای هر سایت
   - تنظیمات چت‌بات
   - آمار و گزارش‌ها
2. سیستم احراز هویت و مدیریت کاربران

**فاز 4: توسعه ویجت چت‌بات**
1. ایجاد ویجت قابل شخصی‌سازی:
   - تغییر ظاهر
   - تنظیم زبان
   - شخصی‌سازی پاسخ‌ها
2. اضافه کردن قابلیت‌های تعاملی:
   - ارسال فایل
   - نمایش محصولات
   - رزرو وقت
   - فرم‌های تماس

**فاز 5: بهبود سیستم پاسخ‌دهی**
1. توسعه سیستم RAG پیشرفته
2. اضافه کردن قابلیت‌های جدید:
   - پشتیبانی از چند زبان
   - تشخیص نیات کاربر
   - پاسخ‌های شخصی‌سازی شده
   - یادگیری از تعاملات

**فاز 6: بهینه‌سازی و مقیاس‌پذیری**
1. بهبود عملکرد سیستم
2. اضافه کردن کش‌ینگ
3. بهینه‌سازی مصرف منابع
4. پشتیبانی از چندین سرور

بیایید با فاز 1 شروع کنیم. برای شروع، من پیشنهاد می‌کنم:

1. اول یک API برای دریافت URL سایت ایجاد کنیم
2. سپس سیستم کراولینگ رو توسعه بدیم
3. در نهایت سیستم پردازش اولیه داده رو پیاده‌سازی کنیم

آیا مایلید با فاز 1 شروع کنیم؟ من می‌تونم کدهای لازم رو براتون آماده کنم و راهنمایی‌تون کنم.

